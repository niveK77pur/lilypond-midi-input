name: Rust

on:
  push:
    branches: [ "master" ]
    paths:
      - 'src/**'
      - 'Cargo.*'

env:
  CARGO_TERM_COLOR: always

jobs:
  check:
    uses: niveK77pur/lilypond-midi-input/blob/master/.github/workflows/check.yml@master

  build-debian:
    needs: check
    uses: niveK77pur/lilypond-midi-input/blob/master/.github/workflows/docker-build.yml@master
    with:
      arch: debian

  build-archlinux:
    needs: check
    uses: niveK77pur/lilypond-midi-input/blob/master/.github/workflows/docker-build.yml@master
    with:
      arch: archlinux
